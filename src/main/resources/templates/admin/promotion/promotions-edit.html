<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="admin/layout/layout">
<head>
    <title>Редагувати акцію</title>
</head>
<body>
<div layout:fragment="content">
    <h1>Редагувати акцію</h1>
    <form enctype="multipart/form-data" method="post" th:action="@{/admin/promotions/{promotion_id}/edit(promotion_id=${promotions.promotion_id})}">
        <h3>Назва новини<input type="text" name="promotion_name" placeholder="Назва новини" class="form-control" th:value="${promotions.promotion_title}"></h3>
        <h3>Опис<input type="text" name="promotion_description" placeholder="Текст" class="form-control" th:value="${promotions.promotion_description}"></h3>
        <h3>Дата публікації<input type="date" name="publication_date" placeholder="Введіть дату публікації" class="form-control" th:value="${promotions.publication_date}"></h3>
        <h3>Головне фото
            <input type="file" name="main_image_path" class="form-control gallery-input" placeholder="Фото" id="mainImageInput" onchange="displayImage1(this, 'mainImage')">
        </h3>
        <div id="mainImageContainer">
            <img th:src="${promotions.main_image_path != null ? '/upload/' + promotions.main_image_path : '/static/img/download.jpg'}" id="mainImage" style="width: 100px; height: 100px;" />
        </div>

        <h3>Галерея картинок</h3>
        <div class="gallery-row">
            <input type="file" name="gallery_photo_1" class="form-control gallery-input" placeholder="Фото 1" onchange="displayImage1(this, 'galleryImage1')">
            <img th:src="${promotions.gallery.imagePath1 != null ? '/upload/' + promotions.gallery.imagePath1 : '/static/img/download.jpg'}" id="galleryImage1" style="width: 100px; height: 100px;" />

            <input type="file" name="gallery_photo_2" class="form-control gallery-input" placeholder="Фото 1" onchange="displayImage1(this, 'galleryImage2')">
            <img th:src="${promotions.gallery.imagePath2 != null ? '/upload/' + promotions.gallery.imagePath2 : '/static/img/download.jpg'}" id="galleryImage2" style="width: 100px; height: 100px;" />

            <input type="file" name="gallery_photo_3" class="form-control gallery-input" placeholder="Фото 1" onchange="displayImage1(this, 'galleryImage3')">
            <img th:src="${promotions.gallery.imagePath3 != null ? '/upload/' + promotions.gallery.imagePath3 : '/static/img/download.jpg'}" id="galleryImage3" style="width: 100px; height: 100px;" />

            <input type="file" name="gallery_photo_4" class="form-control gallery-input" placeholder="Фото 1" onchange="displayImage1(this, 'galleryImage4')">
            <img th:src="${promotions.gallery.imagePath4 != null ? '/upload/' + promotions.gallery.imagePath4 : '/static/img/download.jpg'}" id="galleryImage4" style="width: 100px; height: 100px;" />

            <input type="file" name="gallery_photo_5" class="form-control gallery-input" placeholder="Фото 1" onchange="displayImage1(this, 'galleryImage5')">
            <img th:src="${promotions.gallery.imagePath5 != null ? '/upload/' + promotions.gallery.imagePath5 : '/static/img/download.jpg'}" id="galleryImage5" style="width: 100px; height: 100px;" />

            <!-- Добавьте аналогичный код для остальных полей галереи -->
        </div>

        <script>
            function displayImage1(input, imgId) {
                var thumbnailContainer = document.getElementById(imgId);
                thumbnailContainer.src = ""; // Очистить предыдущую миниатюру

                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        thumbnailContainer.src = e.target.result;
                    };
                    reader.readAsDataURL(input.files[0]);
                } else {
                    // Подставляем стандартное изображение, если файл не выбран
                    thumbnailContainer.src = "/static/img/download.jpg";
                }
            }
        </script>

        <h3>Посилання на трейлер<input type="text" name="url" placeholder="Посилання на трейлер в ютубі" class="form-control" th:value="${promotions.seoBlocks.url}"></h3>

        <h3>Статус</h3>
        <div>
            <label>
                <input type="checkbox" name="status" id="soonCheckbox" value="on" onclick="checkBox('soonCheckbox')" th:checked="${promotions.status == 'on'}"> Вмк
            </label>
            <label>
                <input type="checkbox" name="status" id="nowCheckbox" value="off" onclick="checkBox('nowCheckbox')" th:checked="${promotions.status == 'off'}"> Вимк
            </label>
            <script>
                function checkBox(checkboxId) {
                    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                    checkboxes.forEach((checkbox) => {
                        if (checkbox.id !== checkboxId) {
                            checkbox.checked = false;
                        }
                    });
                }
            </script>
        </div>

        <h3>Seo block</h3>
        <h3>URL<input type="text" name="url" placeholder="URL" class="form-control" th:value="${promotions.seoBlocks.url}"></h3>
        <h3>Title<input type="text" name="title" placeholder="Title" class="form-control" th:value="${promotions.seoBlocks.title}"></h3>
        <h3>Keywords<input type="text" name="keywords" placeholder="word" class="form-control" th:value="${promotions.seoBlocks.keywords}"></h3>
        <h3>Description<input type="text" name="description_seo" placeholder="Description" class="form-control" th:value="${promotions.seoBlocks.description}"></h3>
        <button type="submit" class="btn btn-success">Оновити акцію</button>
    </form>
</div>
</body>
</html>